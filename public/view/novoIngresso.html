


<div class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12 col-md-12">
                <div class="card">
                    

                    <div class="content">
                        <form name="formIngresso" ng-controller="IngressoCadastroController as ingressoCtrl" >
                            <div class="header">
                                <h4 class="title">Distribuição de ingresso para {{ingressoCtrl.evento.titulo}}</h4>
                            </div>

                            <div class="alert alert-success" style="margin: 10px;" role="alert" ng-show="ingressoCtrl.msg">{{ingressoCtrl.msg}}</div>
            
                            <div class="alert alert-danger" style="margin: 10px;" role="alert" ng-show="ingressoCtrl.msgErro">{{ingressoCtrl.msgErro}}</div>

                           
                            <br />

                            <div class="row">
                                <div class="col-md-2"></div>

                                <div class="col-md-4">

                                  <!--   <label for="inputMatricula">Número Conta</label>
                                    <input type="text" name="inputMatricula" id="inputMatricula" class="form-control border-input"  ng-blur="recuperarCliente()" ng-model="ingressoCtrl.novoIngresso.docCliente3" > -->

                                    <div class="input-group">
                                        <div class="input-group-btn">
                                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ingressoCtrl.documentoPrincipal}} <span class="caret"></span></button>
                                            <ul class="dropdown-menu">
                                            <li><a href="#" ng-click="trocarDocumento('CPF')">CPF</a></li>
                                            <li><a href="#" ng-click="trocarDocumento('CNPJ')">CNPJ</a></li>
                                            </ul>
                                        </div>
                                        <input type="text"  id="inputCpf" ng-show="ingressoCtrl.documentoPrincipal == 'CPF'" mask="999.999.999-99"  ng-blur="recuperarCliente()" 
                                        ng-model="ingressoCtrl.novoIngresso.docCliente1" class="form-control border-input" >
                                        <input type="text"   id="inputCnpj" ng-hide="ingressoCtrl.documentoPrincipal == 'CPF'" ng-blur="recuperarCliente()"  mask="99.999.999/9999-99" 
                                        ng-model="ingressoCtrl.novoIngresso.docCliente1" class="form-control border-input" >
                                    </div>
                                    
                                </div>

                                 <div class="col-md-4">
                                    <br />
                                    <div class="progress" ng-show="ingressoCtrl.processando">
                                      <div class="progress-bar progress-bar-striped active" role="progressbar"  aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                                      </div>
                                    </div>
                                    <label style="font-size:14px; ">{{ingressoCtrl.msgPessoaEncontrada}}</label> 
                                    
                                </div>

                            </div>

                            <div class="row">
                                <div class="col-md-2"></div>

                                <div class="col-md-8" style="padding: 0px">
                                   <div class="form-group">
                                        <label for="inputNomeCliente">Nome cliente</label>
                                        <input type="text" name="inputNomeCliente" id="inputNomeCliente" class="form-control border-input"
                                        ng-disabled="ingressoCtrl.desabilitarCadPessoa" placeholder="ex.: Samuel" ng-model="ingressoCtrl.novoIngresso.nomeCliente" required />
                                       
                                    </div>
                                </div>
                            </div>


                            <div class="row">
                                <div class="col-md-2"></div>

                                <div class="col-md-4" style="padding: 0px">
                                    <label for="inputMatricula">Número Conta</label>
                                    <input type="text" name="inputMatricula" id="inputMatricula" ng-disabled="ingressoCtrl.desabilitarCadPessoa" class="form-control border-input"  ng-model="ingressoCtrl.novoIngresso.docCliente3" style="width: 90%" />

                                </div>
                                <div class="col-md-4" ng-show="ingressoCtrl.documentoPrincipal != 'CPF'" style="padding: 0px">
                                    <label for="inputCpfResponsavel">CPF Responsável</label>
                                    <input type="text" name="inputCpfResponsavel" id="inputCpfResponsavel" ng-blur="limparNomeAcompanhante()"   class="form-control border-input" ng-model="ingressoCtrl.novoIngresso.docCliente2" mask="999.999.999-99" />

                                    <div>  
                                        <input type="text" name="inputNomeResponsavel" id="inputNomeResponsavel"  class="form-control border-input" placeholder="Nome do Responsável" ng-model="ingressoCtrl.novoIngresso.acompanhante"  />
                                    </div>

                                </div>

                                <!-- Jeito antigo com cnf/cnpj e RG -->
                                <!-- <div class="col-md-4">
                                    <div class="input-group">
                                        <div class="input-group-btn">
                                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ingressoCtrl.documentoPrincipal}} <span class="caret"></span></button>
                                            <ul class="dropdown-menu">
                                            <li><a href="#" ng-click="trocarDocumento('CPF')">CPF</a></li>
                                            <li><a href="#" ng-click="trocarDocumento('CNPJ')">CNPJ</a></li>
                                            </ul>
                                        </div>
                                        <input type="text"  id="inputCpf" ng-show="ingressoCtrl.documentoPrincipal == 'CPF'" mask="999.999.999-99"  ng-disabled="ingressoCtrl.desabilitarCadPessoa"
                                        ng-model="ingressoCtrl.novoIngresso.docCliente1" class="form-control border-input" >
                                        <input type="text"   id="inputCnpj" ng-hide="ingressoCtrl.documentoPrincipal == 'CPF'"
                                        ng-disabled="ingressoCtrl.desabilitarCadPessoa" mask="99.999.999/9999-99" 
                                        ng-model="ingressoCtrl.novoIngresso.docCliente1" class="form-control border-input" >
                                    </div>

                                </div>
                                <div class="col-md-4">

                                    <div class="input-group">
                                        <span class="input-group-btn">
                                            <button class="btn btn-default" type="button">Rg</button>
                                        </span>
                                        <input type="text" name="inputRG" id="inputRG" class="form-control border-input" ng-disabled="ingressoCtrl.desabilitarCadPessoa"
                                        ng-model="ingressoCtrl.novoIngresso.docCliente2" >
                                    </div>
                                    
                                </div> -->
                               
                            </div>

                           
                            <div class="row text-center">
                                <div class="col-md-12" style="padding-top: 25px;">
                                    
                                    <button type="button" ng-disabled="formIngresso.$invalid"  class="btn   btn-default btn-lg" ng-click="adicionarIngresso()">
                                        <span class="glyphicon glyphicon-tag" aria-hidden="true"> Adicionar ingresso
                                    </button>

                                    <button type="button" ng-show="ingressoCtrl.ingressos.length > 0"  class="btn btn-default btn-lg" ng-click="iniciarCadastro()">
                                        <span class="glyphicon glyphicon-tag" aria-hidden="true"> Nova distribuição
                                    </button>

                                </div>
                            </div>
                            <div class="clearfix"></div>




                            <table class="table table-striped" ng-show="ingressoCtrl.ingressos" style="margin-top: 20px;">
                            
                                <tbody>

                                    <tr ng-repeat="ing in ingressoCtrl.ingressos | orderBy : 'dataGeracao':true" style="border: 1px solid #D3D3D3">
                                    <td style="width: 30%"> <img ng-src="{{ing.qrcodeImg}}" title="Código de identificação do ingresso" /></td>
                                    <td style="width: 70%">
                                        <h4>{{ ing.nomeEvento }} </h4>
                                        <h3 ng-show="ing.nomeCliente">Ingresso destinado a {{ing.nomeCliente}} </h3>
                                        <p> {{ing.chave}} </p>
                                        <p ng-show="{{ing.acompanhante != null}}"> Ingresso destinado a acompanhante</p>
                                        <br />

                                        <p>Ingresso gerado em {{ ing.dataGeracao | date: 'dd/MM/yyyy'}}</p>
                                        
                                        <button type="button" class="btn btn-danger btn-lg" ng-click="removerIngresso(ing._id, ing.idConfiguracao)">
                                            <span class="glyphicon glyphicon-remove" aria-hidden="true"> Remover
                                        </button>
                                        
                                    </td>
                                </tbody>
                            </table>

                        </form>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>


      